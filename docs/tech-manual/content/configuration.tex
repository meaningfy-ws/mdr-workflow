\section{Configuration}
\label{sec:configuration}
	The deployment suite of micro-services is defined docker-compose.yml file. At deployment and at runtime, the service configurations are provided through OS environment variables available in the \textit{.env} file. The role of the .env file is to enable the system administrators to easily change default configurations as necessary in the context of their environment.

    The suite of micro-services is built, started and shut down via docker-compose, a tool designed especially for managing multi-container Docker applications, by describing them in a single file. Then, with a single command, you create and build, start or stop all the services using that configuration file.
    
    In order to avoid hard coding parameters, docker-compose allows you to define them externally. You have the option to define them as operating system level environment variables or provide them in a single file, which is passed as a parameter to the docker-compose tool using the \textit{--env-file} command line argument. Having them in a single file makes much more sense and it is more pragmatic, as you can see and manage all parameters in one place, add the file to the version control system (the contents of the file will evolve and be in sync with the actual code) and have different files for different environments.
    
    The file is usually named \textit{.env} and contains all of the parameters that you want to be able to change and that you need to build and run the defined containers. 
    
    Having the parameters in an \textit{.env} file is very useful in a multitude of scenarios, where you would want to have different configurations for different environments where you might want to deploy. As a more specific example, consider a continuous delivery pipeline and the URLs and ports you want your containers to bind (or to connect) to. You thus can easily have two \textit{.env} files, one named \textit{test.env} and one named \textit{acceptance.env}. Each file would have the same declared variables, but with different values for each of the continuous delivery pipeline stage where it’s being deployed. The benefit is that you deploy and test/use the same containers/artifacts and are able to configure them, on the spot, according to the environment that they are integrated with.
    
    
    Let’s take, for example, the RDF Differ user interface Docker container, which is defined, in the \textit{docker-compose.yml} file as it follows:
\begin{lstlisting}[]
    rdf-differ-ui:
    	container_name: rdf-differ-ui
    	image: meaningfy/rdf-differ-ui:latest
    	ports:
    		- ${RDF_DIFFER_UI_PORT}:${RDF_DIFFER_UI_PORT}
    	env_file: .env
    	restart: always
    	networks:
    		- mydefault
\end{lstlisting}
    The variable used in the definition of this service is just one, \textbf{\textit{RDF\_DIFFER\_UI\_PORT}}. And the place where docker-compose will look for that variable is specified in the \textbf{\textit{env\_file: .env}} line.
    
    Now, if you look in the “.env” file, you will quickly see that the variable is defined as \textbf{\textit{RDF\_DIFFER\_UI\_PORT=8030}}. Change the value of the port, rebuild the micro-services and RDF Differ will no longer be listening on 8030, but on the new port that you specified.
    
    
    This section describes the important configurations options available for each of the services.
	
	\subsection{RDF differ}
	
	The RDF differ application exposes an API and an UI and depends on a dedicated triple store. the RDF diff API is the core service providing the RDF diffing functionality. The URL and port are described below, as well as the request timeout:
	
	\begin{longtable}[c]{@{}p{3.5cm}p{3.5cm}l@{}}
		\toprule
		Description & Value & Associated variable \\* \midrule
		\endfirsthead
		%
		\multicolumn{3}{c}%
		{{\bfseries Table \thetable\ continued from previous page}} \\
		\endhead
		%
		\bottomrule
		\endfoot
		%
		\endlastfoot
		%
		Service URL & http://rdf-differ-api & RDF\_DIFFER\_API\_LOCATION \\
		Service API port & 4030 & RDF\_DIFFER\_API\_PORT \\
		Is in debug mode & True & RDF\_DIFFER\_DEBUG \\
		Service UI port & 8030 & RDF\_DIFFER\_UI\_PORT \\
		Web server worker process timeout & 1200 & RDF\_DIFFER\_GUNICORN\_TIMEOUT \\* \bottomrule
		\caption{RDF differ configurations}
		\label{tab:my-table1}\\
	\end{longtable}

	Please note that the domain specified in in the URL is only available inside the Docker network and is not visible from the outside. Its purpose is to provide a named way for a service to connect to another service. 
	
	\subsection{RDF differ dedicated triple store}
	
	RDF differ depends on a Fuseki triple store to calculate and persist the diffs. The available configurations are described below. 

	\begin{longtable}[c]{@{}p{4cm}p{2cm}l@{}}
		\toprule
		Description & Value & Associated variable \\* \midrule
		\endfirsthead
		%
		\multicolumn{3}{c}%
		{{\bfseries Table \thetable\ continued from previous page}} \\
		\endhead
		%
		\bottomrule
		\endfoot
		%
		\endlastfoot
		%
		Admin account password & admin & RDF\_DIFFER\_FUSEKI\_ADMIN\_PASSWORD \\
		User name & admin & RDF\_DIFFER\_FUSEKI\_USERNAME \\
		Password & admin & RDF\_DIFFER\_FUSEKI\_PASSWORD \\
		Folder where Fuseki stores data & ./data/diff & RDF\_DIFFER\_FUSEKI\_DATA\_FOLDER \\
		External port & 3030 & RDF\_DIFFER\_FUSEKI\_PORT \\
		Internal port & 3030 &  \\
		Additional arguments passed to JVM & -Xmx2g & RDF\_DIFFER\_FUSEKI\_JVM\_ARGS \\
		URL & http://rdf-differ-fuseki & RDF\_DIFFER\_FUSEKI\_LOCATION \\* \bottomrule
		\caption{RDF differ dedicated triple store configurations}
		\label{tab:my-table2}\\
	\end{longtable}
	
	\subsection{RDF fingerprinter}
	
	RDF fingerprinter application exposes an API and an UI. It is based on executing SPARQL queries on given data and therefore also needs a dedicated triple store service. 

	\begin{longtable}[c]{@{}p{3.8cm}p{3cm}l@{}}
		\toprule
		Description & Value & Associated variable \\* \midrule
		\endfirsthead
		%
		\multicolumn{3}{c}%
		{{\bfseries Table \thetable\ continued from previous page}} \\
		\endhead
		%
		\bottomrule
		\endfoot
		%
		\endlastfoot
		%
		Service UI domain & http://rdf-fingerprinter-ui & RDF\_FINGERPRINTER\_UI\_LOCATION \\
		Service UI port & 8020 & RDF\_FINGERPRINTER\_UI\_PORT \\
		Service API domain & http://rdf-fingerprinter-api & RDF\_FINGERPRINTER\_API\_LOCATION \\
		Service API port & 4020 & RDF\_FINGERPRINTER\_API\_PORT \\* \bottomrule
		\caption{RDF fingerprinter configuration}
		\label{tab:my-table7}\\
	\end{longtable}

	Please note that the URL is only available inside the same Docker network and is not visible from the outside. Its purpose is to provide a named way for a service to connect to another service.
	
	\subsection{RDF fingerprinter dedicated triple store}
	
	Fuseki triple store is used as the supporting triple store for this service.
	The available configurations for the Fuseki are described below. 
	
	
	\begin{longtable}[c]{@{}p{4cm}p{2.5cm}l@{}}
		\toprule
		Description & Value & Associated variable \\* \midrule
		\endfirsthead
		%
		\multicolumn{3}{c}%
		{{\bfseries Table \thetable\ continued from previous page}} \\
		\endhead
		%
		\bottomrule
		\endfoot
		%
		\endlastfoot
		%
		Admin password & admin & \footnotesize RDF\_DIFFER\_FUSEKI\_ADMIN\_PASSWORD \\
		User name & admin & \footnotesize RDF\_FINGERPRINTER\_FUSEKI\_USERNAME \\
		Password & admin & \footnotesize RDF\_FINGERPRINTER\_FUSEKI\_PASSWORD \\
		Fuseki data folder & ./data & \footnotesize RDF\_FINGERPRINTER\_FUSEKI\_DATA\_FOLDER \\
		External port & 3020 & \footnotesize RDF\_FINGERPRINTER\_FUSEKI\_PORT \\
		Additional JVM arguments & -Xmx2g & \footnotesize RDF\_DIFFER\_FUSEKI\_JVM\_ARGS \\
		Service URL & http://rdf-differ-fuseki & \footnotesize RDF\_DIFFER\_FUSEKI\_LOCATION \\* \bottomrule
		\caption{RDF differ dedicated triple store configurations}
		\label{tab:my-table8}\\
	\end{longtable}

	
	\subsection{RDF validator}
	
	RDF validator application exposes an API and an UI and does not depend on any additional services as everything is encapsulated into the Docker image. The configuration options are summarised below. 
	
	\begin{longtable}[c]{@{}p{4cm}p{5cm}l@{}}
		\toprule
		Description & Value & Associated variable \\* \midrule
		\endfirsthead
		%
		\multicolumn{3}{c}%
		{{\bfseries Table \thetable\ continued from previous page}} \\
		\endhead
		%
		\bottomrule
		\endfoot
		%
		\endlastfoot
		%
		Service UI port & 8010 & VALIDATOR\_UI\_PORT \\
		URL & http://rdf-validarot-ui:8010 & RDF\_VALIDATOR\_UI\_URL \\
		Service API port & 4010 & VALIDATOR\_API\_PORT \\* \bottomrule
		\caption{RDF validator configurations}
		\label{tab:my-table3}\\
	\end{longtable}

	Note, when validating SPARQL endpoints, the fully qualified domain name of the machine must be specified. As a consequence, ``localhost'' domain will not work as expected.

	\subsection{Nginx server}
	
	Nginx is a web server and in this context it serves on the port 80 (default HTTP) a splash page. However it can be configured in the future to operate as a reverse proxy as it may be necessary in the deployed environment. No configurations are foreseen for this service at the moment. 
	
	\subsection{Jenkins automation server}
	
	Jenkins automation server can be used to orchestrate some workflows especially those that may be triggered by operations on the SVN common repository. Only the port configurations are foreseen at the moment through environment variables. Additional ones can be done by following the official Jenkins installation manual. 
	
	\begin{longtable}[c]{@{}p{4cm}p{5cm}l@{}}
		\toprule
		Description & Value & Associated variable \\* \midrule
		\endfirsthead
		%
		\multicolumn{3}{c}%
		{{\bfseries Table \thetable\ continued from previous page}} \\
		\endhead
		%
		Service UI portUI & 8080 & JENKINS\_UI\_PORT \\
		Agent port & 50000 & JENKINS\_AGENTS\_PORT \\* \bottomrule
		\caption{Jenkins automation server configurations}
		\label{tab:my-table4}\\
	\end{longtable}
	
	\subsection{LinkedPipes ETL services}
	
	LinkedPipes ETL is deployed as a set of four services: storage, executor, executor monitor and the user interface. Additionally a dedicated triple store is provided. 
	
	A special configurations file (\textit{configurations.properties}) is available in the cloned Git repository. This configurations file mirrors the currently established environment variables, which are enumerated below. 
	

	\begin{longtable}[c]{@{}p{5cm}p{4cm}l@{}}
		\toprule
		Description & Value & Associated variable \\* \midrule
		\endfirsthead
		%
		\multicolumn{3}{c}%
		{{\bfseries Table \thetable\ continued from previous page}} \\
		\endhead
		%
		\bottomrule
		\endfoot
		%
		\endlastfoot
		%
		Storage service port & 8063 & LP\_ETL\_STORAGE\_PORT \\
		Storage domain & http://localhost:8060 & LP\_ETL\_DOMAIN \\
		Executor service port & 8065 & LP\_ETL\_EXECUTOR\_PORT \\
		Executor domain & http://localhost:8060 & LP\_ETL\_DOMAIN \\
		Executor monitor service port & 8061 & LP\_ETL\_MONITOR\_PORT \\
		Executor monitor domain & http://localhost:8060 & LP\_ETL\_DOMAIN \\
		Service UI port & 8060 & LP\_ETL\_PORT \\
		UI domain & http://localhost:8060 & LP\_ETL\_DOMAIN \\* \bottomrule
		\caption{LinkedPipes ETL services configurations}
		\label{tab:my-table5}\\
	\end{longtable}
	
	\subsection{LinkedPipes ETL dedicated triple store}
	
	LinkedPipes ETL dedicated triple store is provided as an operational space to support the ETL workflows. The configurations are minimal as indicated below. 
	
	\begin{longtable}[c]{@{}p{4cm}p{2cm}l@{}}
		\toprule
		Description & Value & Associated variable \\* \midrule
		\endfirsthead
		%
		\multicolumn{3}{c}%
		{{\bfseries Table \thetable\ continued from previous page}} \\
		\endhead
		%
		\bottomrule
		\endfoot
		%
		\endlastfoot
		%
		Admin password & admin & LP\_ETL\_FUSEKI\_ADMIN\_PASSWORD \\
		Additional arguments passed to JVM & -Xmx2g & LP\_ETL\_FUSEKI\_JVM\_ARGS \\
		Fuseki port & 3060 & LP\_ETL\_FUSEKI\_PORT \\* \bottomrule
		\caption{LinkedPipes ETL dedicated triple store configurations}
		\label{tab:my-table6}\\
	\end{longtable}
	
	\subsection{Camunda BPMN engine}

	Camunda BPMN engine is deployed as a stand alone service.  A minimal set of configurations are provided here and more advanced ones shall be performed following the official installation manual. 
	
 	\begin{longtable}[c]{@{}p{4cm}p{2cm}l@{}}
	 	\toprule
	 	Description & Value & Associated variable \\* \midrule
	 	\endfirsthead
	 	%
	 	\multicolumn{3}{c}%
	 	{{\bfseries Table \thetable\ continued from previous page}} \\
	 	\endhead
	 	%
	 	\bottomrule
	 	\endfoot
	 	%
	 	\endlastfoot
	 	%	 	
	 	Service UI port & 8080 & CAMUNDA\_UI\_PORT \\* \bottomrule
	 	\caption{Camnunda BPMN service configurations}
	 	\label{tab:my-table9}\\
	 \end{longtable}
	
	