\section{API documentation}

\subsection{Get application profiles}
Get application profiles names and their template variations.

\begin{longtable}[c]{@{}p{7.5cm}p{7.5cm}l@{}}
  \toprule
  URL           & ACTION                                      \\* \midrule
  \endfirsthead
  %
  \multicolumn{3}{c}%
  {{\bfseries Table \thetable\ continued from previous page}} \\
  \endhead
  %
  \bottomrule
  \endfoot
  %
  \endlastfoot
  %
  \texttt{/aps} & \texttt{GET}                                \\* \bottomrule
  \label{tab:rdf-differ-get-aps}                              \\
\end{longtable}

\subsubsection{Response}
\textbf{\texttt{200}}
\begin{lstlisting}
[
  {
    "application_profile": "skos-core-en-only",
    "template_variations": [
      "html",
      "json"
    ]
  },
  {
    "application_profile": "skos-core-lang-fallback",
    "template_variations": [
      "html",
      "json"
    ]
  }
]
\end{lstlisting}

\subsection{Get dataset deltas}
List the existent dataset deltas

\begin{longtable}[c]{@{}p{7.5cm}p{7.5cm}l@{}}
  \toprule
  URL             & ACTION                                    \\* \midrule
  \endfirsthead
  %
  \multicolumn{3}{c}%
  {{\bfseries Table \thetable\ continued from previous page}} \\
  \endhead
  %
  \bottomrule
  \endfoot
  %
  \endlastfoot
  %
  \texttt{/diffs} & \texttt{GET}                              \\* \bottomrule
  \label{tab:rdf-differ-get-diffs}                            \\
\end{longtable}

\subsubsection{Response}
\textbf{\texttt{200}}
\begin{lstlisting}
[
  {
      "current_version_graph": "http://publications.europa.eu/resource/authority/data-theme/version/new",
      "dataset_description": null,
      "dataset_id": "/diff18H35CGpD",
      "dataset_uri": "http://publications.europa.eu/resource/authority/data-theme/",
      "dataset_versions": [
          "new1",
          "old1"
      ],
      "diff_date": null,
      "new_version_id": "new",
      "old_version_id": "old",
      "query_url": "http://fuseki:3030/diff18H35CGpD/sparql",
      "version_history_graph": "http://publications.europa.eu/resource/authority/data-theme/version",
      "version_named_graphs": [
          "http://publications.europa.eu/resource/authority/data-theme/version/new",
          "http://publications.europa.eu/resource/authority/data-theme/version/old"
      ]
  },
  {
      "current_version_graph": "http://publications.europa.eu/resource/authority/data-theme/version/new",
      "dataset_description": null,
      "dataset_id": "/diff2F4ZLMgNu",
      "dataset_uri": "http://publications.europa.eu/resource/authority/data-theme/",
      "dataset_versions": [
          "new1",
          "old1"
      ],
      "diff_date": null,
      "new_version_id": "new",
      "old_version_id": "old",
      "query_url": "http://fuseki:3030/diff2F4ZLMgNu/sparql",
      "version_history_graph": "http://publications.europa.eu/resource/authority/data-theme/version",
      "version_named_graphs": [
          "http://publications.europa.eu/resource/authority/data-theme/version/new",
          "http://publications.europa.eu/resource/authority/data-theme/version/old"
      ]
  }
]
\end{lstlisting}

\subsection{Get dataset delta}
Get specific dataset delta

\begin{longtable}[c]{@{}p{7.5cm}p{7.5cm}l@{}}
  \toprule
  URL                             & ACTION                    \\* \midrule
  \endfirsthead
  %
  \multicolumn{3}{c}%
  {{\bfseries Table \thetable\ continued from previous page}} \\
  \endhead
  %
  \bottomrule
  \endfoot
  %
  \endlastfoot
  %
  \texttt{/diffs/\{dataset\_id\}} & \texttt{GET}              \\* \bottomrule
  \label{tab:rdf-differ-get-diffs}                            \\
\end{longtable}

\subsubsection{Parameters}
\begin{longtable}[c]{@{}p{4.5cm}p{10cm}l@{}}
  \toprule
  Name                 & Description                          \\* \midrule
  \endfirsthead
  %
  \multicolumn{3}{c}%
  {{\bfseries Table \thetable\ continued from previous page}} \\
  \endhead
  %
  \bottomrule
  \endfoot
  %
  \endlastfoot
  %
  \texttt{dataset\_id} & dataset unique name                  \\* \bottomrule
  \label{tab:rdf-differ-get-diff-parameters}                  \\
\end{longtable}

\subsubsection{Response}
\textbf{\texttt{200}}
\begin{lstlisting}
{
  "current_version_graph": "http://publications.europa.eu/resource/authority/data-theme/version/new",
  "dataset_description": null,
  "dataset_id": "/diff18H35CGpD",
  "dataset_uri": "http://publications.europa.eu/resource/authority/data-theme/",
  "dataset_versions": [
    "new1",
    "old1"
  ],
  "diff_date": null,
  "new_version_id": "new",
  "old_version_id": "old",
  "query_url": "http://fuseki:3030/diff18H35CGpD/sparql",
  "version_history_graph": "http://publications.europa.eu/resource/authority/data-theme/version",
  "version_named_graphs": [
    "http://publications.europa.eu/resource/authority/data-theme/version/new",
    "http://publications.europa.eu/resource/authority/data-theme/version/old"
  ]
}
\end{lstlisting}

\textbf{\texttt{404}}
\begin{lstlisting}
{
  "detail": "<datasetname> does not exist.",
  "status": 404,
  "title": "Not Found",
  "type": "about:blank"
}
\end{lstlisting}

\subsection{Delete dataset delta}
Delete specific dataset delta

\begin{longtable}[c]{@{}p{7.5cm}p{7.5cm}l@{}}
  \toprule
  URL                             & ACTION                    \\* \midrule
  \endfirsthead
  %
  \multicolumn{3}{c}%
  {{\bfseries Table \thetable\ continued from previous page}} \\
  \endhead
  %
  \bottomrule
  \endfoot
  %
  \endlastfoot
  %
  \texttt{/diffs/\{dataset\_id\}} & \texttt{DELETE}           \\* \bottomrule
  \label{tab:rdf-differ-delete-diffs}                         \\
\end{longtable}

\subsubsection{Parameters}
\begin{longtable}[c]{@{}p{4.5cm}p{10cm}l@{}}
  \toprule
  Name                 & Description                          \\* \midrule
  \endfirsthead
  %
  \multicolumn{3}{c}%
  {{\bfseries Table \thetable\ continued from previous page}} \\
  \endhead
  %
  \bottomrule
  \endfoot
  %
  \endlastfoot
  %
  \texttt{dataset\_id} & dataset unique name                  \\* \bottomrule
  \label{tab:rdf-differ-get-diff-parameters}                  \\
\end{longtable}

\subsubsection{Response}
\textbf{\texttt{200}}
\begin{lstlisting}
"<datasetname> deleted successfully."
\end{lstlisting}

\textbf{\texttt{404}}
\begin{lstlisting}
{
  "detail": "<datasetname> does not exist.",
  "status": 404,
  "title": "Not Found",
  "type": "about:blank"
}
\end{lstlisting}

\subsection{Create dataset delta}
Create a diff delta

\textit{Note:} The endpoint doesn't check the validity of the uploaded \texttt{RDF files}.

\begin{longtable}[c]{@{}p{7.5cm}p{7.5cm}l@{}}
  \toprule
  URL             & ACTION                                    \\* \midrule
  \endfirsthead
  %
  \multicolumn{3}{c}%
  {{\bfseries Table \thetable\ continued from previous page}} \\
  \endhead
  %
  \bottomrule
  \endfoot
  %
  \endlastfoot
  %
  \texttt{/diffs} & \texttt{POST}                             \\* \bottomrule
  \label{tab:rdf-differ-create-diffs}                         \\
\end{longtable}

\subsubsection{Body}
\textit{multipart/form-data}
\begin{longtable}[c]{@{}p{4.5cm}p{1.5cm}p{2cm}p{6cm}l@{}}
  \toprule
  Name                                 & Required & Type            & Description                                                                                        \\* \midrule
  \endfirsthead
  %
  \multicolumn{3}{c}%
  {{\bfseries Table \thetable\ continued from previous page}}                                                                                                            \\
  \endhead
  %
  \bottomrule
  \endfoot
  %
  \endlastfoot
  %
  \texttt{dataset\_id}                 & true     & \texttt{string} & The dataset identifier. This should be short alphanumeric string uniquely identifying the dataset. \\
  \texttt{dataset\_description}        & true     & \texttt{string} & The dataset description. This is a free text description fo the dataset.                           \\
  \texttt{dataset\_uri}                & true     & \texttt{string} & The dataset URI. For SKOS datasets this is usually the ConceptSchema URI.                          \\
  \texttt{old\_version\_id}            & true     & \texttt{string} & Identifier for the older version of the dataset.                                                   \\
  \texttt{new\_version\_id}            & true     & \texttt{string} & Identifier for the newer version of the dataset.                                                   \\
  \texttt{old\_version\_file\_content} & true     & \texttt{file}   & The content of the old version file.                                                               \\
  \texttt{new\_version\_file\_content} & true     & \texttt{file}   & The content of the new version file.                                                               \\
  \texttt{new\_version\_id}            & true     & \texttt{string} & Identifier for the newer version of the dataset.                                                   \\* \bottomrule
  \label{tab:rdf-differ-get-diff-parameters}                                                                                                                             \\
\end{longtable}

\subsubsection{Response}
\textbf{\texttt{200}}
\begin{lstlisting}
{
  "dataset_name": "diff2F4ZLMgNu",
  "task_id": "cee03499-41b2-41e4-ae75-95b9383eea0c"
}
\end{lstlisting}

\subsection{Create a report}

\begin{longtable}[c]{@{}p{7.5cm}p{7.5cm}l@{}}
  \toprule
  URL                     & ACTION                            \\* \midrule
  \endfirsthead
  %
  \multicolumn{3}{c}%
  {{\bfseries Table \thetable\ continued from previous page}} \\
  \endhead
  %
  \bottomrule
  \endfoot
  %
  \endlastfoot
  %
  \texttt{/diffs/reports} & \texttt{POST}                     \\* \bottomrule
  \label{tab:rdf-differ-create-report}                        \\
\end{longtable}

\subsubsection{Body}
\textit{application/json}
\begin{longtable}[c]{@{}p{4.5cm}p{1.5cm}p{2cm}p{6cm}l@{}}
  \toprule
  Name                          & Required & Type            & Description                                                                                        \\* \midrule
  \endfirsthead
  %
  \multicolumn{3}{c}%
  {{\bfseries Table \thetable\ continued from previous page}}                                                                                                     \\
  \endhead
  %
  \bottomrule
  \endfoot
  %
  \endlastfoot
  %
  \texttt{dataset\_id}          & true     & \texttt{string} & The dataset identifier. This should be short alphanumeric string uniquely identifying the dataset. \\
  \texttt{application\_profile} & true     & \texttt{string} & The application profile identifier                                                                 \\
  \texttt{template\_type}       & true     & \texttt{string} & The template type identifier                                                                       \\
  \texttt{rebuild}              & false    & \texttt{string} & Flag to signal rebuilding the report even if already exists. ("true" or "false")                   \\* \bottomrule
  \label{tab:rdf-differ-get-diff-parameters}                                                                                                                      \\
\end{longtable}

\subsubsection{Response}

\textbf{\texttt{200}}
\begin{lstlisting}
{
  "application_profile": "skos-core-en-only",
  "task_id": "3cf43787-18e8-4927-aa5f-198da6b8bba2"
}
\end{lstlisting}

\subsection{Get report}

\begin{longtable}[c]{@{}p{7.5cm}p{7.5cm}l@{}}
  \toprule
  URL                    & ACTION                             \\* \midrule
  \endfirsthead
  %
  \multicolumn{3}{c}%
  {{\bfseries Table \thetable\ continued from previous page}} \\
  \endhead
  %
  \bottomrule
  \endfoot
  %
  \endlastfoot
  %
  \texttt{/diffs/report} & \texttt{GET}                       \\* \bottomrule
  \label{tab:rdf-differ-get-reports}                          \\
\end{longtable}

\subsubsection{Parameters}
\begin{longtable}[c]{@{}p{4.5cm}p{10cm}l@{}}
  \toprule
  Name                          & Description                        \\* \midrule
  \endfirsthead
  %
  \multicolumn{3}{c}%
  {{\bfseries Table \thetable\ continued from previous page}}        \\
  \endhead
  %
  \bottomrule
  \endfoot
  %
  \endlastfoot
  %
  \texttt{dataset\_id}          & dataset unique name                \\
  \texttt{application\_profile} & The application profile identifier \\
  \texttt{template\_type}       & The template type identifier       \\* \bottomrule
  \label{tab:rdf-differ-get-diff-parameters}                         \\
\end{longtable}

\subsubsection{Response}

\textbf{\texttt{200}}

Report file in specified format

\subsection{List active tasks}

\begin{longtable}[c]{@{}p{7.5cm}p{7.5cm}l@{}}
  \toprule
  URL                    & ACTION                             \\* \midrule
  \endfirsthead
  %
  \multicolumn{3}{c}%
  {{\bfseries Table \thetable\ continued from previous page}} \\
  \endhead
  %
  \bottomrule
  \endfoot
  %
  \endlastfoot
  %
  \texttt{/tasks/active} & \texttt{GET}                       \\* \bottomrule
  \label{tab:rdf-differ-get-tasks}                            \\
\end{longtable}

\subsubsection{Response}
\textbf{\texttt{200}}
\begin{lstlisting}
[
  {
    "acknowledged": true,
    "args": [
        "diff2F4ZLMgNu",
        "skos-core-en-only",
        "html",
        "/usr/src/app/reports",
        "/usr/src/app/resources/templates/skos-core-en-only/template_variants/html",
        {
            ...
        },
        {
            "available_reports": [
                {
                    "application_profile": "diff_report",
                    "template_variations": [
                        "html"
                    ]
                }
            ],
            "current_version_graph": "http://publications.europa.eu/resource/authority/data-theme/version/new1",
            "dataset_description": null,
            "dataset_id": "diff2F4ZLMgNu",
            "dataset_uri": "http://publications.europa.eu/resource/authority/data-theme/",
            "dataset_versions": [
                "new1",
                "old1"
            ],
            "diff_date": null,
            "new_version_id": "old1",
            "old_version_id": "new1",
            "query_url": "http://fuseki:3030/diff2F4ZLMgNu/sparql",
            "version_history_graph": "http://publications.europa.eu/resource/authority/data-theme/version",
            "version_named_graphs": [
                "http://publications.europa.eu/resource/authority/data-theme/version/new1",
                "http://publications.europa.eu/resource/authority/data-theme/version/old1"
            ]
        }
    ],
    "delivery_info": {
        "exchange": "",
        "priority": 0,
        "redelivered": null,
        "routing_key": "celery"
    },
    "hostname": "celery@e5d79cc45ba2",
    "id": "3cf43787-18e8-4927-aa5f-198da6b8bba2",
    "kwargs": {},
    "name": "generate_report",
    "time_start": 1638810064.448214,
    "type": "generate_report",
    "worker_pid": 25
  }
]
\end{lstlisting}

\subsection{Get task status}
Get specific task status

\begin{longtable}[c]{@{}p{7.5cm}p{7.5cm}l@{}}
  \toprule
  URL                          & ACTION                       \\* \midrule
  \endfirsthead
  %
  \multicolumn{3}{c}%
  {{\bfseries Table \thetable\ continued from previous page}} \\
  \endhead
  %
  \bottomrule
  \endfoot
  %
  \endlastfoot
  %
  \texttt{/tasks/\{task\_id\}} & \texttt{GET}                 \\* \bottomrule
  \label{tab:rdf-differ-get-task}                             \\
\end{longtable}

\subsubsection{Parameters}
\begin{longtable}[c]{@{}p{4.5cm}p{10cm}l@{}}
  \toprule
  Name              & Description                             \\* \midrule
  \endfirsthead
  %
  \multicolumn{3}{c}%
  {{\bfseries Table \thetable\ continued from previous page}} \\
  \endhead
  %
  \bottomrule
  \endfoot
  %
  \endlastfoot
  %
  \texttt{task\_id} & task unique id                          \\* \bottomrule
  \label{tab:rdf-differ-get-task-parameters}                  \\
\end{longtable}

\subsubsection{Response}
\textbf{\texttt{200}}
\begin{lstlisting}
{
  "task_id": "6ce77efc-667e-4cf4-bcec-cc7870fcc2db",
  "task_result": true,
  "task_status": "SUCCESS"
}
\end{lstlisting}

\subsection{Stop task execution}

\begin{longtable}[c]{@{}p{7.5cm}p{7.5cm}l@{}}
  \toprule
  URL                          & ACTION                       \\* \midrule
  \endfirsthead
  %
  \multicolumn{3}{c}%
  {{\bfseries Table \thetable\ continued from previous page}} \\
  \endhead
  %
  \bottomrule
  \endfoot
  %
  \endlastfoot
  %
  \texttt{/tasks/\{task\_id\}} & \texttt{DELETE}              \\* \bottomrule
  \label{tab:rdf-differ-delete-task}                          \\
\end{longtable}

\subsubsection{Parameters}
\begin{longtable}[c]{@{}p{4.5cm}p{10cm}l@{}}
  \toprule
  Name              & Description                             \\* \midrule
  \endfirsthead
  %
  \multicolumn{3}{c}%
  {{\bfseries Table \thetable\ continued from previous page}} \\
  \endhead
  %
  \bottomrule
  \endfoot
  %
  \endlastfoot
  %
  \texttt{task\_id} & task unique id                          \\* \bottomrule
  \label{tab:rdf-differ-delete-task-parameters}               \\
\end{longtable}

\subsubsection{Response}
\textbf{\texttt{200}}
\begin{lstlisting}
{
  "message": "task 3cf43787-18e8-4927-aa5f-198da6b8bba2 set for revoking."
}
\end{lstlisting}

\textbf{\texttt{406}}
\begin{lstlisting}
{
  "detail": "task already finished executing or does not exist",
  "status": 406,
  "title": "Not Acceptable",
  "type": "about:blank"
}
\end{lstlisting}